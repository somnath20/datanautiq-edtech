<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Feedback | DataNautIQ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #f5f7fb;
    }

    header {
      background: #0b5cff;
      color: white;
      padding: 16px 24px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    header a {
      color: white;
      text-decoration: none;
      font-weight: bold;
    }

    .container {
      max-width: 1100px;
      margin: 20px auto;
      padding: 0 16px;
    }

    .card {
      background: white;
      border-radius: 8px;
      padding: 16px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.06);
    }

    .actions {
      margin-top: 20px;
      text-align: center;
    }

    .actions a {
      text-decoration: none;
      color: #0b5cff;
      font-weight: bold;
    }
  </style>
</head>

<body>

<header>
  <h2>DataNautIQ â€“ Course Feedback</h2>
  <a href="dashboard.html">â¬… Dashboard</a>
</header>

<div class="container">

  <div class="card">
    <iframe
      id="feedbackFrame"
      width="100%"
      height="900"
      frameborder="0"
      loading="lazy">
    </iframe>
  </div>

  <div class="actions">
    <a href="dashboard.html">â¬… Back to Dashboard</a>
  </div>

</div>

<!-- ðŸ” AUTH + PREFILL LOGIC -->
<script type="module">
  import { onAuthStateChanged } 
    from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
  import { auth } from "./assets/js/firebase.js";

  const iframe = document.getElementById("feedbackFrame");

  onAuthStateChanged(auth, user => {
    if (!user) {
      window.location.href = "login.html";
      return;
    }

    // ðŸ”¹ Prefill values
    const email = encodeURIComponent(user.email);
    const linkedIn = ""; // future: fetch from Firestore
    const course = encodeURIComponent("Azure Data Engineering Masterclass");

    // ðŸ”¹ Google Form URL with ALL known fields
    const formURL =
      "https://docs.google.com/forms/d/e/1FAIpQLSc7xPkFLG8EnHG612fEiPyqpECfUjya5U6wp7sgJbbl6vI3gQ/viewform" +
      "?usp=pp_url" +
      "&entry.816146792=" + email +
      "&entry.1231142237=" + linkedIn +
      "&entry.1852761815=" + course;

    iframe.src = formURL;
  });
</script>

</body>
</html>
